{
  "$schema": "http://json-schema.org/draft-04/schema#",

  "description": "Support shift scheduler input JSON schema",
  "type": "object",
  "properties": {
    "agents": {
      "description": "List of agents to consider while generating the schedule",
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "handle": {
            "description": "Agent's handle",
            "type": "string",
            "pattern": "^@[a-zA-Z0-9_\\-+]"
          },
          "email": {
            "description": "Agent's email address",
            "type": "string",
            "pattern": "[a-zA-Z0-9._%+\\-]+@[a-zA-Z0-9.\\-]+\\.[a-zA-Z]{2,4}"
          },
          "week_average_hours": {
            "description": "Total community hours divided by total weeks worked",
            "type": "number"
          },
          "ideal_shift_length": {
            "description": "Preferred shift length in hours",
            "type": "number",
            "minimum": 2,
            "maximum": 8
          },
          "available_hours": {
            "description": "Availability for each day of the week, Monday to Friday",
            "type": "array",
            "minItems": 5,
            "maxItems": 5,
            "items": {
              "description": "Availability for single weekday",
              "type": "array",
              "minItems": 24,
              "maxItems": 24,
              "items": {
                "description": "Preference legend - 0: unavailable, 1: preferred, 2: available, not preferred, 3: volunteered",
                "type": "number",
                "minimum": 0,
                "maximum": 3
              }
            }
          }
        },
        "required": [ "handle", "email", "week_average_hours", "ideal_shift_length", "available_hours"]
      }
    },
    "options": {
      "type": "object",
      "properties": {
        "custom_uuid": {
          "description": "Set a custom UUID for the job scheduling request. If this custom_uuid is already set for an existing job, the old job will be removed (and stopped if running) before the new one starts. (Default: empty / random uuid is generated by the server)",
          "type": "string"
        },
        "start_Monday_date": {
          "description": "Monday date at start of week being scheduled in YYYY-MM-DD format",
          "type": "string",
          "format": "date"
        },
        "num_consecutive_days": {
          "description": "Number of consecutive days to schedule",
          "type": "number",
          "minimum": 1,
          "maximum": 5
        },
        "num_simultaneous_tracks": {
          "description": "Number of parallel support tracks to schedule",
          "type": "number"
        },
        "support_start_hour": {
          "description": "Balena support start time (default: 8)",
          "type": "number",
          "minimum": 0,
          "maximum": 24
        },
        "support_end_hour": {
          "description": "Balena support end time (default: 24)",
          "type": "number",
          "minimum": 0,
          "maximum": 24
        },
        "shift_min_duration": {
          "description": "Minimum duration of a shift (default: 2)",
          "type": "number"
        },
        "shift_max_duration": {
          "description": "Minimum duration of a shift (default: 8)",
          "type": "number"
        },
        "optimization_timeout": {
          "description": "Optimization timeout for constraint solver (in seconds)",
          "type": "number"
        }
      },
      "required": ["start_Monday_date", "num_consecutive_days", "num_simultaneous_tracks", "support_start_hour", "support_end_hour", "shift_min_duration", "shift_max_duration", "optimization_timeout"]
    }
  },
  "required": [ "agents", "options" ]
}
